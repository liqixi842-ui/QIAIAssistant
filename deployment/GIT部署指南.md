# ä½¿ç”¨ Git ä»“åº“éƒ¨ç½²åˆ°æœåŠ¡å™¨ - å®Œæ•´æŒ‡å—

## ğŸ“‹ æ•´ä½“æµç¨‹

```
æ­¥éª¤1: åœ¨ Replit æ¨é€ä»£ç åˆ° Git ä»“åº“ï¼ˆGitHub/Giteeï¼‰
         â†“
æ­¥éª¤2: åœ¨æœåŠ¡å™¨ä¸Šä» Git æ‹‰å–ä»£ç 
         â†“  
æ­¥éª¤3: è¿è¡Œè‡ªåŠ¨éƒ¨ç½²è„šæœ¬
         â†“
æ­¥éª¤4: è®¿é—® https://app.detusts.com
```

---

## ğŸš€ è¯¦ç»†æ­¥éª¤

### æ­¥éª¤1ï¼šå‡†å¤‡ Git ä»“åº“

æ‚¨æœ‰ä¸¤ä¸ªé€‰æ‹©ï¼š

#### é€‰æ‹©Aï¼šä½¿ç”¨ GitHubï¼ˆå›½é™…ç‰ˆï¼Œå¯èƒ½æ…¢ï¼‰
1. è®¿é—® https://github.com
2. æ³¨å†Œ/ç™»å½•è´¦å·
3. ç‚¹å‡»å³ä¸Šè§’ "+" â†’ "New repository"
4. ä»“åº“åï¼š`dongqilai-crm`
5. é€‰æ‹© **Private**ï¼ˆç§æœ‰ï¼‰
6. ç‚¹å‡» "Create repository"

#### é€‰æ‹©Bï¼šä½¿ç”¨ Giteeï¼ˆå›½å†…ç‰ˆï¼Œå¿«ï¼‰â­ æ¨è
1. è®¿é—® https://gitee.com
2. æ³¨å†Œ/ç™»å½•è´¦å·
3. ç‚¹å‡»å³ä¸Šè§’ "+" â†’ "æ–°å»ºä»“åº“"
4. ä»“åº“åï¼š`dongqilai-crm`
5. é€‰æ‹© **ç§æœ‰**
6. ç‚¹å‡» "åˆ›å»º"

---

### æ­¥éª¤2ï¼šä» Replit æ¨é€ä»£ç 

**åœ¨ Replit å·¦ä¾§å·¥å…·æ æ‰¾åˆ° "Version control"ï¼ˆç‰ˆæœ¬æ§åˆ¶ï¼‰**

ç„¶åæŒ‰ç…§ä»¥ä¸‹æ­¥éª¤ï¼š

#### 2.1 å…³è”è¿œç¨‹ä»“åº“

åœ¨ Replit çš„ Shell ä¸­æ‰§è¡Œï¼ˆæ›¿æ¢æˆæ‚¨çš„ä»“åº“åœ°å€ï¼‰ï¼š

**å¦‚æœç”¨ GitHubï¼š**
```bash
git remote add origin https://github.com/æ‚¨çš„ç”¨æˆ·å/dongqilai-crm.git
```

**å¦‚æœç”¨ Giteeï¼š**
```bash
git remote add origin https://gitee.com/æ‚¨çš„ç”¨æˆ·å/dongqilai-crm.git
```

#### 2.2 æ¨é€ä»£ç 

```bash
git add .
git commit -m "åˆå§‹æäº¤ï¼šåŠ¨ã€ŒQIã€æ¥CRMç³»ç»Ÿ"
git branch -M main
git push -u origin main
```

> ğŸ’¡ **æç¤º**ï¼šç¬¬ä¸€æ¬¡æ¨é€ä¼šè¦æ±‚è¾“å…¥ Git è´¦å·å¯†ç 

---

### æ­¥éª¤3ï¼šåœ¨æœåŠ¡å™¨ä¸Šéƒ¨ç½²

#### 3.1 SSH ç™»å½•æœåŠ¡å™¨

**Windows ç”¨æˆ·**ï¼š
- ä¸‹è½½ PuTTY æˆ–ä½¿ç”¨ Windows Terminal
- è¾“å…¥æœåŠ¡å™¨IPï¼š`172.93.32.222`
- è¾“å…¥ç”¨æˆ·åï¼š`root`
- è¾“å…¥å¯†ç 

**Mac/Linux ç”¨æˆ·**ï¼š
```bash
ssh root@172.93.32.222
```

#### 3.2 ä¸‹è½½å¹¶è¿è¡Œéƒ¨ç½²è„šæœ¬

ç™»å½•æœåŠ¡å™¨åï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
# 1. ä¸‹è½½éƒ¨ç½²è„šæœ¬
curl -O https://æ‚¨çš„ä»“åº“åœ°å€/deployment/deploy-from-git.sh

# æˆ–è€…æ‰‹åŠ¨åˆ›å»ºï¼ˆå¦‚æœä¸Šé¢å‘½ä»¤å¤±è´¥ï¼‰
nano deploy.sh
# å°† deployment/deploy-from-git.sh çš„å†…å®¹ç²˜è´´è¿›å»
# æŒ‰ Ctrl+X, ç„¶å Y, ç„¶å Enter ä¿å­˜

# 2. ä¿®æ”¹è„šæœ¬ä¸­çš„ä»“åº“åœ°å€
nano deploy.sh
# æ‰¾åˆ°è¿™ä¸€è¡Œï¼š
# GIT_REPO="https://github.com/yourusername/dongqilai.git"
# æ”¹æˆæ‚¨çš„ä»“åº“åœ°å€ï¼Œä¾‹å¦‚ï¼š
# GIT_REPO="https://gitee.com/æ‚¨çš„ç”¨æˆ·å/dongqilai-crm.git"

# 3. ç»™è„šæœ¬æ‰§è¡Œæƒé™
chmod +x deploy.sh

# 4. è¿è¡Œéƒ¨ç½²è„šæœ¬
sudo ./deploy.sh
```

#### 3.3 æŒ‰ç…§æç¤ºæ“ä½œ

è„šæœ¬ä¼šæç¤ºæ‚¨ï¼š

1. **è®¾ç½®æ•°æ®åº“å¯†ç **ï¼šè¾“å…¥ä¸€ä¸ªå¼ºå¯†ç ï¼ˆè®°ä½å®ƒï¼‰
2. **ç¼–è¾‘ç¯å¢ƒå˜é‡**ï¼šå¡«å†™ OpenAI API Key
3. **å…¶ä»–æ“ä½œ**ï¼šè„šæœ¬ä¼šè‡ªåŠ¨å®Œæˆ

---

### æ­¥éª¤4ï¼šé…ç½®åŸŸå DNS

ç™»å½•æ‚¨çš„åŸŸåæœåŠ¡å•†ï¼ˆè´­ä¹° detusts.com çš„åœ°æ–¹ï¼‰ï¼š

#### æ·»åŠ  A è®°å½•

```
ç±»å‹: A
ä¸»æœºè®°å½•: app
è®°å½•å€¼: 172.93.32.222
TTL: 600
```

ç­‰å¾… 10-30 åˆ†é’Ÿåï¼Œè®¿é—®ï¼šhttps://app.detusts.com

---

## ğŸ”„ ä»¥åå¦‚ä½•æ›´æ–°ä»£ç ï¼Ÿ

### åœ¨ Replit ä¿®æ”¹ä»£ç åï¼š

```bash
git add .
git commit -m "æ›´æ–°è¯´æ˜"
git push
```

### åœ¨æœåŠ¡å™¨ä¸Šæ›´æ–°ï¼š

```bash
ssh root@172.93.32.222
cd /var/www/dongqilai
git pull
npm install
pm2 restart dongqilai-crm
```

---

## â“ å¸¸è§é—®é¢˜

### Q1: Git æ¨é€å¤±è´¥ï¼Ÿ

**è§£å†³æ–¹æ³•**ï¼š
```bash
# è®¾ç½® Git ç”¨æˆ·ä¿¡æ¯
git config --global user.name "æ‚¨çš„åå­—"
git config --global user.email "æ‚¨çš„é‚®ç®±"

# å†æ¬¡æ¨é€
git push -u origin main
```

### Q2: æœåŠ¡å™¨æ‹‰å–ä»£ç å¤±è´¥ï¼Ÿ

**è§£å†³æ–¹æ³•**ï¼š
```bash
# å¦‚æœæ˜¯ç§æœ‰ä»“åº“ï¼Œéœ€è¦é…ç½® SSH å¯†é’¥æˆ–ä½¿ç”¨ Personal Access Token

# æ–¹æ³•1ï¼šä½¿ç”¨ HTTPS + Tokenï¼ˆç®€å•ï¼‰
git clone https://ç”¨æˆ·å:token@gitee.com/ç”¨æˆ·å/dongqilai-crm.git

# æ–¹æ³•2ï¼šé…ç½® SSH å¯†é’¥ï¼ˆæ¨èï¼‰
ssh-keygen -t rsa -b 4096
cat ~/.ssh/id_rsa.pub
# å¤åˆ¶è¾“å‡ºçš„å†…å®¹ï¼Œæ·»åŠ åˆ° Gitee/GitHub çš„ SSH Keys è®¾ç½®ä¸­
```

### Q3: éƒ¨ç½²è„šæœ¬è¿è¡Œå¤±è´¥ï¼Ÿ

**è§£å†³æ–¹æ³•**ï¼š
1. æŸ¥çœ‹é”™è¯¯ä¿¡æ¯
2. æ£€æŸ¥æ˜¯å¦ä½¿ç”¨äº† `sudo` è¿è¡Œ
3. ç¡®è®¤æœåŠ¡å™¨æ˜¯ Ubuntu/Debian ç³»ç»Ÿ
4. è”ç³»æˆ‘å¸®åŠ©æ’æŸ¥

### Q4: æ— æ³•è®¿é—®åŸŸåï¼Ÿ

**è§£å†³æ–¹æ³•**ï¼š
1. æ£€æŸ¥ DNS æ˜¯å¦ç”Ÿæ•ˆï¼š`ping app.detusts.com`
2. æ£€æŸ¥é˜²ç«å¢™ï¼š`ufw allow 80/tcp && ufw allow 443/tcp`
3. æ£€æŸ¥ Nginxï¼š`systemctl status nginx`

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœé‡åˆ°ä»»ä½•é—®é¢˜ï¼š

1. **æŸ¥çœ‹é”™è¯¯æ—¥å¿—**ï¼š
   ```bash
   pm2 logs dongqilai-crm
   tail -f /var/log/nginx/error.log
   ```

2. **æ£€æŸ¥æœåŠ¡çŠ¶æ€**ï¼š
   ```bash
   pm2 status
   systemctl status nginx
   systemctl status postgresql
   ```

3. **è”ç³»æ”¯æŒ**ï¼š
   - æˆªå›¾é”™è¯¯ä¿¡æ¯
   - å‘Šè¯‰æˆ‘æ‚¨æ‰§è¡Œåˆ°å“ªä¸€æ­¥

---

## âœ… éƒ¨ç½²æˆåŠŸæ£€æŸ¥æ¸…å•

- [ ] ä»£ç å·²æ¨é€åˆ° Git ä»“åº“
- [ ] æœåŠ¡å™¨ä¸ŠæˆåŠŸå…‹éš†ä»£ç 
- [ ] æ•°æ®åº“åˆ›å»ºæˆåŠŸ
- [ ] ç¯å¢ƒå˜é‡é…ç½®æ­£ç¡®
- [ ] åº”ç”¨å¯åŠ¨æˆåŠŸï¼ˆpm2 status æ˜¾ç¤º onlineï¼‰
- [ ] Nginx è¿è¡Œæ­£å¸¸
- [ ] SSL è¯ä¹¦ç”³è¯·æˆåŠŸ
- [ ] DNS è§£ææ­£ç¡®
- [ ] å¯ä»¥è®¿é—® https://app.detusts.com
- [ ] èƒ½å¤Ÿç™»å½•ç³»ç»Ÿï¼ˆqixi / hu626388ï¼‰

å…¨éƒ¨å®Œæˆåï¼Œæ‚¨çš„ CRM ç³»ç»Ÿå°±éƒ¨ç½²å¥½äº†ï¼
