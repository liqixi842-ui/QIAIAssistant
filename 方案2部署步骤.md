# ğŸš€ åŠ¨ã€ŒQIã€æ¥ 1.0 - æ–¹æ¡ˆ2éƒ¨ç½²å®Œæ•´æ­¥éª¤

## ğŸ“‹ æ€»ä½“æµç¨‹ï¼ˆ30åˆ†é’Ÿå®Œæˆï¼‰

```
Replit â†’ GitHub/Giteeç§æœ‰ä»“åº“ â†’ æ‚¨çš„æœåŠ¡å™¨
```

---

## ç¬¬ä¸€éƒ¨åˆ†ï¼šåœ¨Replitä¸­è®¾ç½®Gitï¼ˆ5åˆ†é’Ÿï¼‰

### æ­¥éª¤1ï¼šè¿æ¥Gitä»“åº“

#### é€‰é¡¹Aï¼šä½¿ç”¨GitHubï¼ˆæ¨èï¼‰

1. åœ¨Replitå·¦ä¾§æ ç‚¹å‡» **Version Control** å›¾æ ‡ï¼ˆåƒæ ‘æçš„å›¾æ ‡ï¼‰
2. ç‚¹å‡» **"Connect to GitHub"**
3. æˆæƒReplitè®¿é—®GitHub
4. åˆ›å»ºæ–°ä»“åº“ï¼š
   - ä»“åº“åï¼š`dongqilai` 
   - **é‡è¦ï¼šé€‰æ‹© "Private"ï¼ˆç§æœ‰ï¼‰** âœ…
   - æè¿°ï¼šåŠ¨ã€ŒQIã€æ¥ 1.0 - æ™ºèƒ½CRMç³»ç»Ÿ
5. ç‚¹å‡» **"Create repository"**

#### é€‰é¡¹Bï¼šä½¿ç”¨Giteeï¼ˆå›½å†…é€Ÿåº¦æ›´å¿«ï¼‰

1. å…ˆå» https://gitee.com æ³¨å†Œè´¦å·
2. åˆ›å»ºæ–°ä»“åº“ï¼š
   - ä»“åº“åï¼š`dongqilai`
   - **é€‰æ‹©"ç§æœ‰"** âœ…
3. åœ¨Replitä¸­ï¼š
   - ç‚¹å‡»å·¦ä¾§ Version Control
   - é€‰æ‹© "Initialize git repository"
   - æ·»åŠ è¿œç¨‹ä»“åº“ï¼š
   ```bash
   git remote add origin https://gitee.com/æ‚¨çš„ç”¨æˆ·å/dongqilai.git
   ```

### æ­¥éª¤2ï¼šæäº¤ä»£ç åˆ°ä»“åº“

åœ¨Replitä¸­ï¼š

1. ç‚¹å‡» Version Control é¢æ¿
2. å†™æäº¤æ¶ˆæ¯ï¼š`åˆå§‹æäº¤ - åŠ¨ã€ŒQIã€æ¥ 1.0`
3. ç‚¹å‡» **"Commit & push"**

âœ… **å®Œæˆï¼** ä»£ç å·²å®‰å…¨ä¿å­˜åˆ°ç§æœ‰Gitä»“åº“

---

## ç¬¬äºŒéƒ¨åˆ†ï¼šåœ¨æœåŠ¡å™¨ä¸Šéƒ¨ç½²ï¼ˆ20åˆ†é’Ÿï¼‰

### æ­¥éª¤1ï¼šSSHç™»å½•åˆ°æ‚¨çš„æœåŠ¡å™¨

```bash
ssh root@æ‚¨çš„æœåŠ¡å™¨IPåœ°å€
```

### æ­¥éª¤2ï¼šå®‰è£…ç¯å¢ƒï¼ˆè‡ªåŠ¨åŒ–ï¼‰

å¤åˆ¶ä»¥ä¸‹å‘½ä»¤ï¼Œä¸€æ¬¡æ€§ç²˜è´´æ‰§è¡Œï¼š

```bash
# æ›´æ–°ç³»ç»Ÿ
apt update && apt upgrade -y

# å®‰è£… Node.js 20
curl -fsSL https://deb.nodesource.com/setup_20.x | bash -
apt install -y nodejs

# å®‰è£… Nginx
apt install -y nginx

# å®‰è£… PM2
npm install -g pm2

# å®‰è£… Git
apt install -y git

# é…ç½®é˜²ç«å¢™
ufw --force enable
ufw allow ssh
ufw allow 80
ufw allow 443

# å®‰è£… Certbotï¼ˆSSLè¯ä¹¦å·¥å…·ï¼‰
apt install -y certbot python3-certbot-nginx

echo "âœ“ ç¯å¢ƒå®‰è£…å®Œæˆï¼"
```

### æ­¥éª¤3ï¼šè®¾ç½®SSHå¯†é’¥ï¼ˆç”¨äºå®‰å…¨å…‹éš†ä»“åº“ï¼‰

#### å¦‚æœä½¿ç”¨GitHubï¼š

```bash
# ç”ŸæˆSSHå¯†é’¥
ssh-keygen -t ed25519 -C "your_email@example.com"
# æŒ‰3æ¬¡å›è½¦ï¼ˆä½¿ç”¨é»˜è®¤è®¾ç½®ï¼Œä¸è®¾å¯†ç ï¼‰

# æ˜¾ç¤ºå…¬é’¥
cat ~/.ssh/id_ed25519.pub
```

**å¤åˆ¶æ˜¾ç¤ºçš„å…¬é’¥**ï¼Œç„¶åï¼š
1. æ‰“å¼€ https://github.com/settings/keys
2. ç‚¹å‡» **"New SSH key"**
3. ç²˜è´´å…¬é’¥
4. ç‚¹å‡» **"Add SSH key"**

#### å¦‚æœä½¿ç”¨Giteeï¼š

```bash
# ç”ŸæˆSSHå¯†é’¥ï¼ˆåŒä¸Šï¼‰
ssh-keygen -t ed25519 -C "your_email@example.com"
cat ~/.ssh/id_ed25519.pub
```

**å¤åˆ¶æ˜¾ç¤ºçš„å…¬é’¥**ï¼Œç„¶åï¼š
1. æ‰“å¼€ https://gitee.com/profile/sshkeys
2. ç‚¹å‡» **"æ·»åŠ å…¬é’¥"**
3. ç²˜è´´å…¬é’¥
4. ç‚¹å‡» **"ç¡®å®š"**

### æ­¥éª¤4ï¼šå…‹éš†é¡¹ç›®åˆ°æœåŠ¡å™¨

```bash
# åˆ›å»ºé¡¹ç›®ç›®å½•
mkdir -p /var/www
cd /var/www

# å…‹éš†æ‚¨çš„ç§æœ‰ä»“åº“ï¼ˆé€‰æ‹©å¯¹åº”çš„å‘½ä»¤ï¼‰

# GitHub:
git clone git@github.com:æ‚¨çš„GitHubç”¨æˆ·å/dongqilai.git

# Gitee:
git clone git@gitee.com:æ‚¨çš„Giteeç”¨æˆ·å/dongqilai.git

# è¿›å…¥é¡¹ç›®ç›®å½•
cd dongqilai
```

### æ­¥éª¤5ï¼šå®‰è£…é¡¹ç›®ä¾èµ–

```bash
# å®‰è£…ç”Ÿäº§ç¯å¢ƒä¾èµ–
npm install --production

# æˆ–è€…å¦‚æœéœ€è¦æ‰€æœ‰ä¾èµ–ï¼ˆåŒ…æ‹¬å¼€å‘ä¾èµ–ï¼‰
npm install
```

### æ­¥éª¤6ï¼šé…ç½®ç¯å¢ƒå˜é‡ï¼ˆé‡è¦ï¼ï¼‰

```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp .env.example .env

# ç¼–è¾‘ç¯å¢ƒå˜é‡
nano .env
```

**åœ¨æ‰“å¼€çš„ç¼–è¾‘å™¨ä¸­ï¼Œä¿®æ”¹ä»¥ä¸‹å†…å®¹ï¼š**

æ‰¾åˆ°è¿™å‡ è¡Œå¹¶ä¿®æ”¹ï¼š

```bash
SESSION_SECRET=your-random-secret-key-change-this-in-production
```
æ”¹æˆä¸€ä¸ªéšæœºå­—ç¬¦ä¸²ï¼Œæ¯”å¦‚ï¼š
```bash
SESSION_SECRET=dongqilai2025mycrmsecurekeyabcd1234
```

æ‰¾åˆ°ï¼š
```bash
AI_INTEGRATIONS_OPENAI_API_KEY=your-skynetchat-api-key-here
```
æ”¹æˆæ‚¨çœŸå®çš„ skynetchat.io APIå¯†é’¥ï¼š
```bash
AI_INTEGRATIONS_OPENAI_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxx
```

**ä¿å­˜å¹¶é€€å‡º**ï¼š
- æŒ‰ `Ctrl + X`
- æŒ‰ `Y`
- æŒ‰ `Enter`

### æ­¥éª¤7ï¼šå¯åŠ¨åº”ç”¨

```bash
# ä½¿ç”¨PM2å¯åŠ¨ï¼ˆä½¿ç”¨é…ç½®æ–‡ä»¶ï¼‰
pm2 start ecosystem.config.js

# ä¿å­˜PM2é…ç½®
pm2 save

# è®¾ç½®å¼€æœºè‡ªå¯åŠ¨
pm2 startup
# ä¼šæ˜¾ç¤ºä¸€æ¡å‘½ä»¤ï¼Œå¤åˆ¶å¹¶æ‰§è¡Œå®ƒ

# æŸ¥çœ‹è¿è¡ŒçŠ¶æ€
pm2 status
```

æ‚¨åº”è¯¥çœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„è¾“å‡ºï¼š
```
â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ id  â”‚ name           â”‚ status  â”‚ cpu     â”‚
â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 0   â”‚ dongqilai-1.0  â”‚ online  â”‚ 0%      â”‚
â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ­¥éª¤8ï¼šé…ç½®Nginx

```bash
# ç¼–è¾‘Nginxé…ç½®
nano nginx.conf
```

æ‰¾åˆ°è¿™ä¸€è¡Œï¼š
```nginx
server_name YOUR_DOMAIN_OR_IP;
```

**æ”¹æˆæ‚¨çš„å®é™…IPæˆ–åŸŸå**ï¼š

å¦‚æœåªç”¨IPï¼š
```nginx
server_name 123.45.67.89;  # æ‚¨çš„æœåŠ¡å™¨IP
```

å¦‚æœæœ‰åŸŸåï¼š
```nginx
server_name yourdomain.com www.yourdomain.com;
```

ä¿å­˜åï¼š

```bash
# å¤åˆ¶é…ç½®æ–‡ä»¶åˆ°Nginxç›®å½•
cp nginx.conf /etc/nginx/sites-available/dongqilai

# åˆ›å»ºè½¯é“¾æ¥
ln -s /etc/nginx/sites-available/dongqilai /etc/nginx/sites-enabled/

# æµ‹è¯•é…ç½®
nginx -t

# å¦‚æœæ˜¾ç¤º "test is successful"ï¼Œé‡å¯Nginx
systemctl restart nginx
```

### æ­¥éª¤9ï¼šè®¿é—®åº”ç”¨

**æµè§ˆå™¨æ‰“å¼€**ï¼š`http://æ‚¨çš„æœåŠ¡å™¨IP`

**ä½¿ç”¨ä¸»ç®¡è´¦å·ç™»å½•æµ‹è¯•**ï¼š
- ç”¨æˆ·åï¼š`qixi`
- å¯†ç ï¼š`hu626388`

âœ… **å¦‚æœèƒ½ç™»å½•ï¼Œéƒ¨ç½²æˆåŠŸï¼**

---

## ç¬¬ä¸‰éƒ¨åˆ†ï¼šé…ç½®åŸŸåå’ŒHTTPSï¼ˆå¯é€‰ï¼Œ10åˆ†é’Ÿï¼‰

### å¦‚æœæ‚¨æœ‰åŸŸåï¼š

#### 1. é…ç½®DNSè§£æ

åœ¨æ‚¨çš„åŸŸåæä¾›å•†ï¼ˆé˜¿é‡Œäº‘/è…¾è®¯äº‘ç­‰ï¼‰ï¼š

- **ç±»å‹**ï¼šAè®°å½•
- **ä¸»æœºè®°å½•**ï¼š@ ï¼ˆæˆ– wwwï¼‰
- **è®°å½•å€¼**ï¼šæ‚¨çš„æœåŠ¡å™¨IP
- **TTL**ï¼š600

ç­‰å¾…DNSç”Ÿæ•ˆï¼ˆ5-10åˆ†é’Ÿï¼‰

#### 2. æµ‹è¯•åŸŸå

```bash
# æµ‹è¯•åŸŸåæ˜¯å¦è§£æåˆ°æœåŠ¡å™¨
ping yourdomain.com
```

#### 3. å®‰è£…SSLè¯ä¹¦ï¼ˆå…è´¹ï¼Œè‡ªåŠ¨ç»­æœŸï¼‰

```bash
# ä¸€é”®å®‰è£…SSLè¯ä¹¦
certbot --nginx -d yourdomain.com -d www.yourdomain.com

# æŒ‰æç¤ºæ“ä½œï¼š
# 1. è¾“å…¥é‚®ç®±
# 2. åŒæ„æœåŠ¡æ¡æ¬¾
# 3. é€‰æ‹© 2ï¼ˆé‡å®šå‘HTTPåˆ°HTTPSï¼‰
```

âœ… **å®Œæˆï¼** ç°åœ¨è®¿é—® `https://yourdomain.com` å°±æ˜¯å®‰å…¨çš„HTTPSäº†ï¼

---

## âœ… éƒ¨ç½²å®Œæˆæ£€æŸ¥æ¸…å•

- [ ] Gitä»“åº“å·²åˆ›å»ºï¼ˆç§æœ‰ï¼‰
- [ ] ä»£ç å·²æ¨é€åˆ°ä»“åº“
- [ ] æœåŠ¡å™¨ç¯å¢ƒå·²å®‰è£…ï¼ˆNode.jsã€Nginxã€PM2ï¼‰
- [ ] SSHå¯†é’¥å·²æ·»åŠ åˆ°GitHub/Gitee
- [ ] é¡¹ç›®å·²å…‹éš†åˆ° `/var/www/dongqilai`
- [ ] `.env` æ–‡ä»¶å·²é…ç½®ï¼ˆAPIå¯†é’¥ã€SESSION_SECRETï¼‰
- [ ] PM2 å·²å¯åŠ¨åº”ç”¨ï¼ˆ`pm2 status` æ˜¾ç¤º onlineï¼‰
- [ ] Nginx å·²é…ç½®å¹¶é‡å¯
- [ ] æµè§ˆå™¨å¯ä»¥è®¿é—®åº”ç”¨
- [ ] ä¸»ç®¡è´¦å·å¯ä»¥ç™»å½•ï¼ˆqixi/hu626388ï¼‰
- [ ] ï¼ˆå¯é€‰ï¼‰åŸŸåå·²é…ç½®
- [ ] ï¼ˆå¯é€‰ï¼‰SSLè¯ä¹¦å·²å®‰è£…

---

## ğŸ”§ æ—¥å¸¸ç»´æŠ¤å‘½ä»¤

### æŸ¥çœ‹åº”ç”¨çŠ¶æ€
```bash
pm2 status
pm2 logs dongqilai-1.0
```

### æ›´æ–°åº”ç”¨ï¼ˆæœ‰æ–°ç‰ˆæœ¬æ—¶ï¼‰
```bash
cd /var/www/dongqilai
git pull origin main
npm install --production
pm2 restart dongqilai-1.0
```

### é‡å¯åº”ç”¨
```bash
pm2 restart dongqilai-1.0
```

### æŸ¥çœ‹æ—¥å¿—
```bash
pm2 logs dongqilai-1.0 --lines 100
```

---

## ğŸ†˜ é‡åˆ°é—®é¢˜ï¼Ÿ

### é—®é¢˜1ï¼šæ— æ³•è®¿é—®åº”ç”¨

```bash
# æ£€æŸ¥PM2çŠ¶æ€
pm2 status

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
pm2 logs dongqilai-1.0 --err

# æ£€æŸ¥é˜²ç«å¢™
ufw status

# æ£€æŸ¥Nginx
systemctl status nginx
nginx -t
```

### é—®é¢˜2ï¼šGitå…‹éš†å¤±è´¥

```bash
# ç¡®è®¤SSHå¯†é’¥å·²æ·»åŠ 
ssh -T git@github.com
# æˆ–
ssh -T git@gitee.com

# å¦‚æœå¤±è´¥ï¼Œé‡æ–°ç”Ÿæˆå¯†é’¥
ssh-keygen -t ed25519 -C "your_email@example.com" -f ~/.ssh/id_ed25519 -N ""
cat ~/.ssh/id_ed25519.pub
```

### é—®é¢˜3ï¼šAIåŠŸèƒ½ä¸å·¥ä½œ

```bash
# æ£€æŸ¥ç¯å¢ƒå˜é‡
cat .env | grep AI_

# ç¡®è®¤APIå¯†é’¥æ­£ç¡®
# é‡å¯åº”ç”¨
pm2 restart dongqilai-1.0
```

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

**ç»´æŠ¤ç‰ˆæœ¬**ï¼šåŠ¨ã€ŒQIã€æ¥ 1.0

éœ€è¦æŠ€æœ¯æ”¯æŒæ—¶ï¼Œè¯·è¯´ï¼š**"éœ€è¦ç»´æŠ¤åŠ¨ã€ŒQIã€æ¥ 1.0"**

æä¾›è¿™äº›ä¿¡æ¯ä¼šå¸®åŠ©æ›´å¿«è§£å†³é—®é¢˜ï¼š
- é”™è¯¯æˆªå›¾
- PM2æ—¥å¿—ï¼š`pm2 logs dongqilai-1.0 --lines 50`
- Nginxé”™è¯¯æ—¥å¿—ï¼š`tail -50 /var/log/nginx/dongqilai-error.log`

---

**ç¥éƒ¨ç½²é¡ºåˆ©ï¼** ğŸ‰

æœ‰ä»»ä½•é—®é¢˜éšæ—¶æ‰¾æˆ‘ï¼
